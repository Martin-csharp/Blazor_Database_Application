@page "/"
@using Microsoft.AspNetCore.Components.Authorization
@inject AuthenticationStateProvider AuthenticationStateProvider

<PageTitle>Index</PageTitle>

<h1>Hello, world!</h1>

<AuthorizeView>
    <p>@userName</p>
</AuthorizeView>

<AuthorizeView Policy="AdminModerator">
    <p>Admin and mods are equal and have no secrets</p>
</AuthorizeView>

<AuthorizeView Roles="Admin">
    <p>Or do I... :)</p>
    <p>Admin is the best!</p>
</AuthorizeView>


@code
{

    protected override async Task OnInitializedAsync()
    {
        var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
        var user = authState.User;
        userName = user.Identity.Name;
    }
}